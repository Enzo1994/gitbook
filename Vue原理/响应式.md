# 响应式

## 核心 API：

`Object.defineProperty()`

1. 目的：给属性增加 set 和 get，可以捕获数据改变
2. 实现：能监听对象，不能监听数组
3. 复杂对象：深度监听

## Object.defineProperty 缺点：

1. 深度监听需要一次性递归到底
2. 无法监听新增和删除属性，需要`Vue.$set()`,`Vue.$delete()`;
3. 无法监听原生数组，需要数组拦截处理。

## 监听数组：

1. 为什么不直接修改数组 push 方法？会导致框架污染全局
2. 解决方案：把框架内部的数组指向新创建的原型

## 代码实现：

1. 核心方法：`observe()`、 `defineReactive()`
2. observe 需要监听两次：
   1. 第一次设置对象值的时候
   2. 第二次 set 新值的时候
