# 第二步、CPU如何执行二进制代码的？

### 1. 第一步：把程序装入内存

内存：快递柜  
内存地址：快递柜中格子的编号
CPU：操作快递柜的人

CPU 可以通过指定内存地址，从内存中读取数据，或者往内存中写入数据，有了内存地址，CPU 和内存就可以有序地交互。

我们把取出指令、分析指令、执行指令这三个过程称为一个 CPU 时钟周期。CPU 是永不停歇的，当它执行完成一条指令之后，会立即从内存中取出下一条指令，接着分析该指令，执行该指令，CPU 一直重复执行该过程，直至所有的指令执行完成。

### 2. CPU从内存中读取指令
> 读取指令、分析指令、执行指令这三个过程称为CPU时钟周期

CPU如何拿到内存中的指令？
1. 当二进制代码被装载进了内存之后，系统会将二进制代码中的第一条指令的地址写入到 PC 寄存器中
2. 到了下一个时钟周期时，CPU 便会根据 PC 寄存器中的地址，从内存中取出指令。

### 3. CPU读取指令以后：
1. 将下一条指令的内存地址更新到CPU中PC寄存器
2. 分析该指令，识别出指令类型，以及各种获取操作数的方法

### 4. CPU执行指令：
> 通用寄存器（可以比作口袋）：CPU中用来存放数据的设备，因为CPU访问内存的速度很慢，所以CPU就在内部添加了一些存储设备，**通用寄存器容量小，读写速度快，内存容量大，读写速度慢。**

> 通用寄存器既可以存储数据，也可以存储内存指针

> rbp 寄存器通常是用来存放栈帧指针的，rsp 寄存器用来存放栈顶指针的，PC 寄存器用来存放下一条要执行的指令等。

> 指令类型
1. 加载的指令：从内存中复制指定长度的内容到通用寄存器中，并覆盖寄存器中原来的内容

2. 存储类型指令：将寄存器中某个内容复制到内存某个位置，并覆盖掉内存的原本内容
3. 更新指令